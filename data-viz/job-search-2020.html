<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/apple-touch-icon.png?v=A0Rrm0rq0k"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/favicon-32x32.png?v=A0Rrm0rq0k"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/favicon-16x16.png?v=A0Rrm0rq0k"
    />
    <link rel="manifest" href="/manifest.json?v=A0Rrm0rq0k" />
    <link
      rel="mask-icon"
      href="/safari-pinned-tab.svg?v=A0Rrm0rq0k"
      color="#5bbad5"
    />
    <link rel="shortcut icon" href="/favicon.ico?v=A0Rrm0rq0k" />
    <meta name="theme-color" content="#aaaaaa" />
    <title>Tom's Software Job Search 2K20</title>
    <meta
      property="og:image"
      content="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-og-image.png"
    />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <script>
      (function (i, s, o, g, r, a, m) {
        i["GoogleAnalyticsObject"] = r;
        (i[r] =
          i[r] ||
          function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(
        window,
        document,
        "script",
        "https://www.google-analytics.com/analytics.js",
        "ga"
      );

      ga("create", "UA-46705501-4", "auto");
      ga("send", "pageview");
    </script>
    <!-- Custom CSS -->
    <link href="../css/tomlum.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.9.2/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dragscroll/0.0.8/dragscroll.min.js"></script>
    <script src="../utils/d3-selection-multi.v0.4.min.js"></script>

    <style>
      body {
        background-color: #999999;
        overscroll-behavior-x: none;
        padding-bottom: 50px;
      }
      a {
        color: #702bb0;
        font-family: Arial;
      }
      a:hover {
        color: #c689ff;
      }
      a:active {
        color: #c689ff;
      }
      .left {
        text-align: left;
      }
      h1 {
        margin-top: 0px;
        font-family: Futura;
        text-align: center;
        color: #ffffff;
      }
      h2 {
        margin: 0px;
        font-family: Futura;
        color: #ffffff;
      }
      h3 {
        margin: 0px;
        font-family: Futura;
        color: #ffffff;
      }
      div {
        font-size: 16px;
        font-family: Arial;
        line-height: 1.45;
      }
      p {
        font-size: 16px;
        font-family: Arial;
        line-height: 1.4;
      }
      .bullet {
        font-size: 16px;
        margin-left: 0px;
        margin: 10px 0px;
      }
      .legend {
        padding: 15px;
        color: white;
        background-color: #555;
        font-size: 16px;
        margin: auto;
        margin-top: 10px;
      }
      .align-center {
        align-items: center;
      }
      .justify-center {
        justify-content: center;
      }
      .center {
        padding: 0px 20px;
        text-align: left;
        max-width: 650px;
      }
      .row {
        display: flex;
        flex-direction: row;
      }
      .col {
        display: flex;
        flex-direction: column;
        margin-right: 15px;
      }
      .chartContainer {
        display: flex;
        overflow: scroll;
        cursor: grab;
      }
      .tooltip {
        display: none;
        position: absolute;
        background-color: #000;
        color: #ddd;
        padding: 10px;
        font-size: 16px;
        border: solid 2px #ddd;
        border-radius: 3px;
      }
      .futura {
        font-family: Futura;
      }
      .takeaways {
        padding: 5px 15px;
        background-color: #fff;
        border: solid 3px #444;
        border-radius: 3px;
        margin: 10px 0px;
      }
      .mauto {
        margin: auto;
      }
      .mt11 {
        margin-top: 11px;
      }
      .legendIcon {
        width: 25px;
        height: 25px;
      }
      .legendIconContainer {
        width: 35px;
        height: 35px;
        border-radius: 100px;
        background-color: black;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 5px;
      }
      button {
        border-radius: 3px;
        margin-left: 5px;
      }
    </style>
  </head>
  <header></header>

  <body>
    &nbsp;
    <div class="icons">
      <div>
        <!-- SOCIAL BUTTONS -->
        <a class="icon" href="/">
          <img
            src="https://s3.us-east-2.amazonaws.com/tomlum/me.png"
            width="70"
          />
        </a>
        <a
          class="icon"
          href="https://www.tiktok.com/@tomlumperson"
          target="_blank"
          >
          <img
          src="https://s3.us-east-2.amazonaws.com/tomlum/tiktok.png"
          alt="Tiktok"
          width="40"
          />
        </a>
        <a
          class="icon"
          href="https://www.youtube.com/channel/UCim0JOU5CqZG3jKhU2c_yeg"
          target="_blank"
        >
          <img
            src="https://s3.us-east-2.amazonaws.com/tomlum/videos.png"
            alt="Youtube"
            width="70"
          />
        </a>
        <a class="icon" href="https://twitter.com/tomlumperson" target="_blank">
          <img
            src="https://s3.us-east-2.amazonaws.com/tomlum/bird.png"
            alt="Twitter"
            width="70"
          />
        </a>
        <a class="icon" href="mailto:TomLumPerson@gmail.com" target="_blank">
          <img
            src="https://s3.us-east-2.amazonaws.com/tomlum/mail.png"
            alt="Mail"
            width="70"
          />
        </a>
      </div>
    </div>

    <div>
      <div class="center">
        <div class="col align-center mauto">
          <h1>Tom Gets a Software Job, 2K20</h1>
        </div>
        <div style="display: flex">
          <div class="left">
            <p class="mt11">
              In 2019
              <a
                href="https://www.tomlum.com/data-viz/job-search"
                target="_blank"
                >I made a visualization</a
              >
              showing my process of applying to a new job as a Web Developer. I
              wanted to show just how long it took, how many applications I
              made, and how many places simply never responded.
            </p>
            <p>
              Well in May of 2020 at the height of the covid pandemic in the
              U.S. I was laid off from that new 2019 job, along with around 40%
              of the company, so back on that search I went!
            </p>
            <div>
              <h2 class="mt11">Legend</h2>
              <div class="row justify-center">
                <div class="col">
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-sent.png"
                      />
                    </div>
                    Application Sent
                  </div>
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-wave.png"
                      />
                    </div>
                    Company Reaches Out
                  </div>
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-code.png"
                      />
                    </div>
                    Coding Interview
                  </div>
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-test.png"
                      />
                    </div>
                    Code Test
                  </div>
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-x.png"
                      />
                    </div>
                    Rejection
                  </div>
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-check.png"
                      />
                    </div>
                    Offer Made
                  </div>
                </div>
                <div class="col">
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-referral.png"
                      />
                    </div>
                    Referral
                  </div>
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-phone.png"
                      />
                    </div>
                    Phone Screen/Interview
                  </div>
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-group.png"
                      />
                    </div>
                    Virtual Onsite Interview
                  </div>
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-home.png"
                      />
                    </div>
                    Take Home Assignment
                  </div>
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-reject.png"
                      />
                    </div>
                    I Rejected
                  </div>
                  <div class="row align-center" style="margin-top: 5px">
                    <div class="legendIconContainer">
                      <img
                        class="legendIcon"
                        src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-star.png"
                      />
                    </div>
                    Offer Accepted
                  </div>
                </div>
              </div>
              <br />
              <div class="row justify-center">
                <img
                  style="border: solid 2px black"
                  src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-colorgrade.png"
                />
              </div>
              <div>
                Job applications change from white to green with each
                interaction.
              </div>
              <div class="row justify-center">
                <img
                  style="border: solid 2px black"
                  src="https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-colorgrade2.png"
                />
              </div>
              <div>
                However, if a company ended up never responding to me again,
                their color fades away.
              </div>
              <div class="mt11">
                Names in the chart have been renamed after stages from the video
                game Super Smash Bros.
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="legend">
        <h2 class="row justify-center">Tom Lum's Software Job Search 2020</h2>
        <br />
        <div class="row align-center justify-center futura" style="flex-wrap: wrap;">
          <h3 class="orderBy">Order by:</h3>
          <button style="margin-bottom: 5px;" id="chrono">Chronological</button>
          <button style="margin-bottom: 5px;" id="length">Duration</button>
          <button style="margin-bottom: 5px;" id="size">Company Size</button>
        </div>
      </div>
      <div class="chartContainer dragscroll">
        <svg
          style="margin: auto; min-width: 3060px"
          id="chart"
          width="3060"
          height="1600"
        ></svg>
      </div>
      <br />
      <div class="center">
        <svg
          style="min-width: 300px; margin-left: 10px; float: right; margin-bottom: 10px;"
          id="pieChart"
          width="300"
          height="400"
        ></svg>
        <p>
          <br/>
          <br/>
          As with last year, there are a number of factors to consider with
          reading this data.
        </p>
        <div class="bullet">
          A.) I have about 3 years of relevant experience from 2 full time
          software jobs at this point
        </div>
        <div class="bullet">
          B.) Because we had recently unionized, we negotiated enough severance
          so that I could primarily apply to places I was genuinely interested
          to work at. (If you're curious how we formed a union and why unions in
          tech rock, check out the
          <u
            ><a
              href="https://eclive.engelberg.center/episodes/chapter-1-fertile-ground/transcript"
              >Oral History of Kickstarter United Podcast</a
            ></u
          >)
        </div>
        <div class="bullet">
          C.) That said, I was still laid off, and we were (and, depending on
          when you're reading this, are still curently) living in a pandemic, so
          this definitely affected both my motivations and the motivations of
          these companies.
        </div>
        <p>
          Having seen the rate of companies that never respond from last year, I
          was not surprised much by the ghost rate this year. As well, though
          there is certainly not enough data to make a definite conclusion,
          <b>in general smaller companies were more likely to ghost</b>, which
          is understandable given their team size. I applied to 19 small
          companies (< 50 people), 26 medium companies (< 500 people) and 30
          large companies (> 500 people), and their ghost rates were 84%, 65%,
          57% respectively.
          <b>That said, larger companies usually had longer processes</b>,
          including the longest application process, which took
          <b>4 months</b> just to get to the onsite interview, though I can only
          imagine
          <a target="_blank" href="https://candor.co/hiring-freezes"
            >covid hiring freezes</a
          >
          must have had something to do with it.
        </p>
        <br />
        <p>Overall, my main takeaways are much the same as last year:</p>
        <div class="takeaways">
          <div class="bullet">
            <b>[ Apply, Apply, Apply ]</b> It really is a numbers game,
            don't be too hard on yourself and don't set your heart on one place.
            Take your time applying to places you really love, but remember that
            there are plenty of fish in the sea.
          </div>
          <div class="bullet">
            <b>[ Keep Track ]</b> While I was applying I kept a spreadsheet of
            the places I had applied to and my progress with them. This gave me
            a realistic sense of how I was doing, and kept me motivated to keep
            applying if I hadn't applied in a while.
          </div>
          <div class="bullet">
            <b>[ Don't Go It Alone ]</b> Whether it be for referrals, resume
            proofreading, ideas for where to apply, a 3rd opinion vibe check on
            a sketchy company, or most importantly, offering support and joy,
            this process is so much easier with other people. From distant,
            loose connections to best friends, to family, I truly could not have
            done this without so much help and motivation from so many people.
          </div>
        </div>
        <br />
        <h2 class="center" style="text-align: center;">
          <a href="/data-viz"style="color: #222">
            ← More Data Viz
          </a>
        </h2>
        <br />
        <div style="text-align: center">
          <!-- SOCIAL BUTTONS -->
          <a class="icon" href="/">
            <img
              src="https://s3.us-east-2.amazonaws.com/tomlum/me.png"
              width="70"
            />
          </a>
          <a
            class="icon"
            href="https://www.tiktok.com/@tomlumperson"
            target="_blank"
            >
            <img
            src="https://s3.us-east-2.amazonaws.com/tomlum/tiktok.png"
            alt="Tiktok"
            width="40"
            />
          </a>
          <a
            class="icon"
            href="https://www.youtube.com/channel/UCim0JOU5CqZG3jKhU2c_yeg"
            target="_blank"
          >
            <img
              src="https://s3.us-east-2.amazonaws.com/tomlum/videos.png"
              alt="Youtube"
              width="70"
            />
          </a>
          <a
            class="icon"
            href="https://twitter.com/tomlumperson"
            target="_blank"
          >
            <img
              src="https://s3.us-east-2.amazonaws.com/tomlum/bird.png"
              alt="Twitter"
              width="70"
            />
          </a>
          <a class="icon" href="mailto:TomLumPerson@gmail.com" target="_blank">
            <img
              src="https://s3.us-east-2.amazonaws.com/tomlum/mail.png"
              alt="Mail"
              width="70"
            />
          </a>
          <br />
        </div>
      </div>
    </div>
  </body>
  <footer>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Utils
        d3.selection.prototype.apply = d3.transition.prototype.apply = function () {
          const callback = arguments[0];
          arguments[0] = this;
          return callback.apply(null, arguments);
        };

        const dayMilliseconds = 1000 * 60 * 60 * 24;
        const startDate = new Date(2020, 4, 1);
        const graceDays = 31;
        const sizeNames = [0, "small", "mid-size", "large"];
        const monthNames = [
          "January",
          "February",
          "March",
          "April",
          "May",
          "June",
          "July",
          "August",
          "September",
          "October",
          "November",
          "December",
        ];

        const iconLegendImage = {
          "✉️": "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-sent.png",
          "👋": "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-wave.png",
          "🧑‍💻":
            "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-code.png",
          "📝": "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-test.png",
          "❌": "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-x.png",
          "✅": "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-check.png",
          "📩":
            "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-referral.png",
          "📞": "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-phone.png",
          "👨‍👩‍👧‍👦": "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-group.png",
          "🏠": "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-home.png",
          "🙅": "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-reject.png",
          "🌟": "https://s3.us-east-2.amazonaws.com/tomlum/tgaj2k20-star.png",
        };
        const iconLegend = {
          "✉️": "Application Sent",
          "📩": "Referral",
          "👋": "Company Reaches Out",
          "📞": "Phone Screen/Interview",
          "🧑‍💻": "Coding Interview",
          "📝": "Code Test",
          "🏠": "Take Home Assignment",
          "👨‍👩‍👧‍👦": "Group/'Onsite' Interview",
          "❌": "Rejection",
          "🙅": "I Rejected",
          "✅": "Offer Made",
          "🌟": "Offer Accepted",
        };
        const jobData = [
          {
            timeline: [["5/11"], ["5/21", "❌"]],
            place: "Kongo_Jungle",
            size: 3,
          },
          {
            timeline: [["5/11"], ["8/4", "❌"]],
            place: "Kongo_Jungle",
            size: 3,
          },
          {
            timeline: [["5/11"], ["6/14", "❌"]],
            place: "Kongo_Jungle",
            size: 3,
          },
          {
            timeline: [
              ["5/12", "📩"],
              ["5/13", "👋"],
              ["5/14", "📞"],
              ["5/28", "❌"],
            ],
            place: "Great_Plateau_Tower",
            size: 3,
          },
          { timeline: [["5/12", "📩"]], place: "Great_Plateau_Tower", size: 3 },
          { timeline: [["5/13"]], place: "Poké_Floats", size: 1 },
          {
            timeline: [
              ["5/21"],
              ["6/17", "👋"],
              ["8/20", "📞"],
              ["8/24", "📝"],
              ["9/10", "📞"],
              ["9/24", "👨‍👩‍👧‍👦"],
              ["9/25", "🙅"],
            ],
            place: "Norfair",
            size: 3,
          },
          {
            timeline: [["5/21"], ["8/16"], ["8/17", "👋"], ["8/19", "📞"]],
            place: "Spiral_Mountain",
            size: 2,
          },
          { timeline: [["5/21"]], place: "Town_and_City", size: 2 },
          { timeline: [["5/22"]], place: "Wii_Fit_Studio", size: 3 },
          {
            timeline: [["5/24"], ["6/16", "👋"]],
            place: "Mario_Galaxy",
            size: 1,
          },
          { timeline: [["5/24"]], place: "Corneria", size: 2 },
          {
            timeline: [["5/26"], ["8/25", "📝"], ["9/18", "❌"]],
            place: "Wily_Castle",
            size: 3,
          },
          { timeline: [["5/28"]], place: "Yoshi's_Island", size: 2 },
          { timeline: [["6/2"]], place: "Tomodachi_Life", size: 3 },
          { timeline: [["6/2"]], place: "Arena_Ferox", size: 3 },
          { timeline: [["6/4"]], place: "Frigate_Orpheon", size: 2 },
          { timeline: [["6/4"]], place: "Super_Mario_Maker", size: 2 },
          { timeline: [["6/9"]], place: "Kalos_Pokémon_League", size: 1 },
          {
            timeline: [
              ["6/10", "📩"],
              ["6/16", "👋"],
              ["6/23", "📞"],
              ["6/30", "🧑‍💻"],
              ["6/31", "❌"],
            ],
            place: "Rainbow_Cruise",
            size: 2,
          },
          { timeline: [["6/14"]], place: "Jungle_Japes", size: 2 },
          {
            timeline: [
              ["6/15", "📩"],
              ["6/16", "👋"],
              ["6/17", "📞"],
              ["6/24", "📞"],
              ["6/26", "❌"],
            ],
            place: "New_Donk_City_Hall",
            size: 3,
          },
          {
            timeline: [
              ["6/18", "📩"],
              ["6/24", "👋"],
              ["6/26", "📞"],
              ["6/29", "🧑‍💻"],
              ["7/2", "❌"],
            ],
            place: "Peach's_Castle",
            size: 2,
          },
          {
            timeline: [
              ["6/21"],
              ["6/26", "👋"],
              ["6/29", "📞"],
              ["7/6", "🧑‍💻"],
              ["7/8", "🏠"],
              ["7/27", "👨‍👩‍👧‍👦"],
              ["7/29", "❌"],
            ],
            place: "Delfino_Plaza",
            size: 3,
          },
          { timeline: [["6/21"]], place: "Paper_Mario", size: 3 },
          {
            timeline: [["6/22"], ["6/26", "❌"]],
            place: "Tortimer_Island",
            size: 2,
          },
          { timeline: [["6/30", "📩"]], place: "Windy_Hill_Zone", size: 3 },
          { timeline: [["7/5"]], place: "Golden_Plains", size: 2 },
          {
            timeline: [["7/16"], ["8/13", "📝"], ["9/23", "❌"]],
            place: "Hyrule_Castle",
            size: 3,
          },
          { timeline: [["7/22"]], place: "Hanenbow", size: 1 },
          {
            timeline: [["7/29"], ["7/31", "👋"], ["8/4", "📞"], ["8/11", "❌"]],
            place: "Pyrosphere",
            size: 2,
          },
          { timeline: [["7/30"]], place: "Umbra_Clock_Tower", size: 3 },
          { timeline: [["7/31"]], place: "Spirit_Train", size: 2 },
          { timeline: [["7/31"]], place: "Flat_Zone", size: 3 },
          {
            timeline: [["7/31"], ["9/8", "👋"], ["9/9", "📞"]],
            place: "Distant_Planet",
            size: 1,
          },
          {
            timeline: [["7/31"], ["8/12", "❌"]],
            place: "Super_Happy_Tree",
            size: 2,
          },
          {
            timeline: [["7/31"], ["8/22", "❌"]],
            place: "Boxing_Ring",
            size: 3,
          },
          {
            timeline: [["8/1"], ["8/4", "❌"]],
            place: "Miiverse",
            size: 3,
          },
          {
            timeline: [["8/2"], ["9/15", "👋"], ["9/18", "📞"], ["9/25", "🙅"]],
            place: "Gamer",
            size: 3,
          },
          {
            timeline: [["8/2"], ["8/6", "📝"], ["8/12", "📞"], ["8/14", "❌"]],
            place: "Pirate_Ship",
            size: 1,
          },
          { timeline: [["8/2"]], place: "Unova_Pokémon_League", size: 1 },
          { timeline: [["8/2"]], place: "PictoChat", size: 3 },
          { timeline: [["8/8"]], place: "Mute_City", size: 1 },
          { timeline: [["8/11"]], place: "Skyloft", size: 1 },
          { timeline: [["8/15"]], place: "Coliseum", size: 2 },
          { timeline: [["8/15"]], place: "Balloon_Fight", size: 3 },
          {
            timeline: [
              ["8/16"],
              ["8/31", "👋"],
              ["9/4", "📞"],
              ["9/5", "🏠"],
              ["9/15", "❌"],
            ],
            place: "Mushroom_Kingdom",
            size: 2,
          },
          {
            timeline: [["8/16"], ["9/18", "❌"]],
            place: "Saffron_City",
            size: 2,
          },
          { timeline: [["8/16"]], place: "Sector_Z", size: 2 },
          { timeline: [["8/18"]], place: "Halberd", size: 1 },
          { timeline: [["8/18"]], place: "Big_Blue" },
          { timeline: [["8/18"]], place: "Midgar", size: 2 },
          {
            timeline: [
              ["8/18"],
              ["8/24", "👋"],
              ["8/26", "📞"],
              ["9/3", "📞"],
              ["9/8", "👨‍👩‍👧‍👦"],
              ["9/17", "📞"],
              ["9/18", "✅"],
              ["9/25", "🌟"],
            ],
            place: "Brinstar_Depths",
            size: 1,
          },
          {
            timeline: [["8/18"], ["9/16", "❌"]],
            place: "WarioWare,_Inc.",
            size: 1,
          },
          { timeline: [["8/19"]], place: "Gerudo_Valley", size: 2 },
          {
            timeline: [["8/21"], ["8/27", "❌"]],
            place: "Port_Town_Aero_Dive",
            size: 2,
          },
          { timeline: [["8/22"]], place: "Living_Room", size: 3 },
          { timeline: [["8/22"]], place: "Garden_of_Hope", size: 2 },
          { timeline: [["8/23"]], place: "Woolly_World", size: 3 },
          { timeline: [["8/23"]], place: "Mushroom_Kingdom", size: 3 },
          { timeline: [["8/23"]], place: "Princess_Peach's_Castle", size: 2 },
          { timeline: [["8/23"]], place: "Big_Battlefield", size: 1 },
          { timeline: [["8/23"]], place: "Fountain_of_Dreams", size: 1 },
          { timeline: [["8/23"]], place: "Venom", size: 3 },
          { timeline: [["8/23"]], place: "Summit", size: 3 },
          { timeline: [["8/26"]], place: "Dracula's Castle", size: 3 },
          { timeline: [["8/31"]], place: "Pac-Land", size: 1 },
          { timeline: [["9/1"]], place: "Onett", size: 2 },
          { timeline: [["9/1"]], place: "Brinstar", size: 1 },
          { timeline: [["9/1"]], place: "Rumble_Falls", size: 1 },
          {
            timeline: [["9/1"], ["9/21", "👋"], ["9/25", "🙅"]],
            place: "Pokémon_Stadium",
            size: 2,
          },
          { timeline: [["9/1"]], place: "Icicle_Mountain", size: 3 },
          {
            timeline: [["9/3"]],
            place: "Battlefield",
            size: 2,
          },
          { timeline: [["9/9"]], place: "Smashville", size: 1 },
          {
            timeline: [["9/9"], ["9/21", "❌"]],
            place: "Final_Destination",
            size: 3,
          },
        ];
        const totalDays = 150;
        const dotData = [];
        const monthData = [4, 5, 6, 7, 8];
        const monthStripeData = [];
        const gradientData = [];
        const jobBarData = [];
        const sortTranslations = [];

        function barColor(i, stage, a) {
          return `hsla(${
            50 + stage * 10
          }, 50%, ${Math.max(50, 100 - stage * 35)}%, ${a === undefined ? 100 : a}%)`;
        }

        let alternate = 1;
        for (let i = 0; i < totalDays; i++) {
          monthStripeData.push(alternate);
          alternate *= -1;
        }

        for (let i = 0; i < jobData.length; i++) {
          const job = jobData[i];
          job.originalY = i;
          for (let j = 0; j < job.timeline.length; j++) {
            const event = job.timeline[j];
            event.time = event[0];
            const [month, day] = event[0].split("/");
            event.time =
              (new Date(2020, month - 1, day) - startDate) / dayMilliseconds;
            event.icon = event[1] || "✉️";
            event.i = i;
            event.place = job.place;
            event.month = month;
            event.day = day;
            event.size = job.size;
            dotData.push(event);
          }
        }

        const margin = { top: 0, right: 0, bottom: 0, left: 0 };
        const width = 153 * 20;
        const height = 1600;
        // CHART
        const chartDiv = document.getElementById("chart");
        const chartFrame = d3.select(chartDiv);
        const chart = chartFrame
          .append("g")
          .attr("transform", `translate(${margin.left},${margin.top})`);

        for (let i = 0; i < jobData.length; i++) {
          const job = jobData[i];
          for (let j = 0; j < job.timeline.length; j++) {
            const [time, icon] = job.timeline[j];
            if (job.timeline[j + 1]) {
              jobBarData.push({
                time: job.timeline[j].time,
                i,
                y: i,
                stage: j,
                width: job.timeline[j + 1].time - job.timeline[j].time + 1,
                i,
                size: 6,
              });
            } else {
              if (icon !== "❌" && icon !== "🙅" && icon !== "🌟") {
                gradientData.push({
                  time: job.timeline[j].time,
                  i: i,
                  y: i,
                  stage: j,
                  size: 6,
                });
                const grad = chart.append("linearGradient").attr("id", `g${i}`);
                grad
                  .append("stop")
                  .attr("stop-color", barColor(i, j))
                  .attr("offset", "30%");
                grad
                  .append("stop")
                  .attr("stop-color", barColor(i, j, 0))
                  .attr("offset", "100%");
              }
            }
          }
        }

        for (let i = 0; i < monthData.length; i++) {
          const grad = chart.append("linearGradient").attr("id", `mg${i}`);
          grad
            .append("stop")
            .attr(
              "stop-color",
              `hsl(${i * 50 + 170}, 7%, ${i % 2 === 0 ? 20 : 25}%)`
            )
            .attr("offset", "0%");
          grad
            .append("stop")
            .attr(
              "stop-color",
              `hsl(${i * 50 + 170}, 2%, ${(i % 2 === 0 ? 20 : 25) - 5}%)`
            )
            .attr("offset", "100%");
          grad.attr("gradientTransform", "rotate(90)");
        }

        const sortedJobData = [...jobData].sort((a, b) =>
          a.timeline[a.timeline.length - 1].time - a.timeline[0].time >
          b.timeline[b.timeline.length - 1].time - b.timeline[0].time
            ? -1
            : 1
        );

        const sortedJobData2 = [...sortedJobData].sort((a, b) =>
          a.size > b.size ? -1 : 1
        );

        for (let i = 0; i < jobData.length; i++) {
          jobData[sortedJobData[i].originalY].translateY =
            i - sortedJobData[i].originalY - 3;
          jobData[i].translateX = -jobData[i].timeline[0].time;
        }

        for (let i = 0; i < jobData.length; i++) {
          jobData[sortedJobData2[i].originalY].translateY2 =
            i - sortedJobData2[i].originalY - 3;
          jobData[i].translateX = -jobData[i].timeline[0].time;
        }

        const tooltip = d3
          .select("body")
          .append("div")
          .attr("class", "tooltip");

        const x = d3.scaleLinear().domain([0, totalDays]).range([0, width]);
        const y = d3
          .scaleLinear()
          .domain([0, jobData.length])
          .range([60, height]);

        chart
          .selectAll(".month")
          .data(monthData, (d) => d)
          .join(
            (enter) =>
              enter.append("rect").attrs({
                class: "month",
                x: (d) => x((new Date(2020, d) - startDate) / dayMilliseconds),
                y: (d) => 0,
                width: (d) =>
                  x(
                    (new Date(2020, d + 1) - new Date(2020, d)) /
                      dayMilliseconds
                  ) + 1,
                height: height,
                fill: (d) => `url(#mg${d - 4})`,
              }),
            (update) => update,
            (exit) => exit.remove()
          );
        chart
          .selectAll(".monthStripes")
          .data(monthStripeData, (d) => d)
          .join(
            (enter) =>
              enter.append("rect").attrs({
                class: "month",
                x: (d, i) => x(i),
                y: (d) => 0,
                width: (d) => x(1),
                height: height,
                fill: (d) => `hsla(${d * 50}, 0%, 90%, ${d > 0 ? 5 : 0}%)`,
              }),
            (update) => update,
            (exit) => exit.remove()
          );
        chart
          .selectAll(".monthText")
          .data(monthData, (d) => d)
          .join(
            (enter) =>
              enter
                .append("text")
                .text((d) => monthNames[d])
                .attrs({
                  class: "monthText",
                  "font-size": "30px",
                  x: (d) =>
                    x(
                      Math.max(
                        0,
                        (new Date(2020, d) - startDate) / dayMilliseconds
                      )
                    ) + 10,
                  y: (d) => 35,
                  fill: (d) => `hsl(0, 0%, 70%)`,
                }),
            (update) => update,
            (exit) => exit.remove()
          );

        const barHeight = Math.min(height / jobData.length - 5, 4);
        // Bars
        chart
          .selectAll(".bar")
          .data(jobBarData, (d) => d)
          .join(
            (enter) =>
              enter.append("rect").attrs({
                class: `bar`,
                x: (d) => x(d.time),
                height: (d) => d.size,
                width: (d) => x(d.width),
                y: (d) => y(d.y) - d.size / 2,
                fill: (d) => barColor(d.y, d.stage),
              }),
            (update) => update,
            (exit) => exit.remove()
          );
        chart
          .selectAll(".barGradients")
          .data(gradientData, (d) => d)
          .join(
            (enter) =>
              enter.append("rect").attrs({
                class: "barGradients",
                x: (d) => x(d.time + 1),
                height: (d) => d.size,
                width: (d) => x(20),
                y: (d) => y(d.y) - d.size / 2,
                fill: (d) => `url(#g${d.y})`,
              }),
            (update) => update,
            (exit) => exit.remove()
          );

        // Dots
        chart
          .selectAll(".dot")
          .data(dotData, (d) => d)
          .join(
            (enter) =>
              enter.append("circle").attrs({
                class: "dot",
                cx: (d) => x(d.time) + 10,
                cy: (d) => y(d.i),
                r: 10,
                fill: "#333",
                stroke: "#fff",
              }),
            (update) => update,
            (exit) => exit.remove()
          );
        chart
          .selectAll(".dotText")
          .data(dotData, (d) => d)
          .join(
            (enter) =>
              enter
                .append("image")
                .attrs({
                  "xlink:href": (d) => iconLegendImage[d.icon],
                  class: "dot",
                  x: (d) => x(d.time) + 2,
                  y: (d) => y(d.i) - 8,
                  width: "16",
                  height: "16",
                })
                .styles({ "text-anchor": "middle" })
                .on("mousemove", (d) => {
                  tooltip
                    .styles({
                      left: d3.event.pageX - 50 + "px",
                      top: d3.event.pageY + 10 + "px",
                      display: "inline-block",
                    })
                    .html(
                      `<img class="legendIcon" src="${
                        iconLegendImage[d.icon]
                      }"/> ${iconLegend[d.icon]} (${monthNames[d.month]} ${
                        d.day
                      })<br/>"${d.place.split("_").join(" ")}" - ${
                        sizeNames[d.size]
                      } company`
                    );
                })
                .on("mouseout", function (d) {
                  tooltip.style("display", "none");
                }),
            (update) => update,
            (exit) => exit.remove()
          );

        const pieChartWidth = 300;
        const pieChartHeight = 400;
        const pieChart = d3
          .select(document.getElementById("pieChart"))
          .append("g")
          .attrs({
            transform: `translate(${pieChartWidth / 2}, ${pieChartHeight / 2})`,
          });
        const resultData = {
          "👻": 50,
          "❌": 21,
          "🙅": 3,
          "✅": 1,
        };
        const pieLabelData = [
          "👻 No Response:",
          "❌ Rejection:",
          "🙅 I Rejected:",
          "✅ Offer:",
        ];
        const pieLabelData2 = ["67%", "28%", "4%", "1%"];
        const pieColors = ["#fe7474", "#72160d", "#999", "#3de87b"];
        const pie = d3.pie().value((d) => d.value);
        const pieData = pie(d3.entries(resultData));
        // Now I know that group A goes from 0 degrees to x degrees and so on.

        // shape helper to build arcs:
        const arcGenerator = d3.arc().innerRadius(0).outerRadius(100);
        const midArcGenerator = d3.arc().innerRadius(50).outerRadius(100);
        const outerArcGenerator = d3.arc().innerRadius(100).outerRadius(130);
        const superOuterArcGenerator = d3
          .arc()
          .innerRadius(130)
          .outerRadius(160);

        pieChart.append("rect").attrs({
          width: pieChartWidth,
          height: pieChartHeight,
          x: -150,
          y: -200,
          fill: "#fff",
          stroke: "#222",
        });
        pieChart
          .append("text")
          .text("Ratio of all Final Decisions")
          .attrs({
            x: 0,
            y: -170,
            color: "#fff",
          })
          .styles({ "text-anchor": "middle" });
        pieChart
          .selectAll("slice")
          .data(pieData)
          .enter()
          .append("path")
          .attrs({
            d: arcGenerator,
            fill: (d, i) => pieColors[i],
            stroke: "black",
            "stroke-width": "2px",
          });
        pieChart
          .selectAll(".icon")
          .data(pieData)
          .enter()
          .append("text")
          .text((d) => d.data.key)
          .attrs({
            transform: (d, i) =>
              `translate(${
                i > 2
                  ? outerArcGenerator.centroid(d)
                  : i < 2
                  ? arcGenerator.centroid(d)
                  : midArcGenerator.centroid(d)
              })`,
          })
          .styles({ "text-anchor": "middle", "font-size": 25 });
        pieChart
          .selectAll(".label")
          .data(pieLabelData)
          .enter()
          .append("text")
          .text((d) => d)
          .attrs({
            y: (d, i) => 120 + i * 20,
            x: -80,
          })
          .styles({ "font-size": 15 });
        pieChart
          .selectAll(".label")
          .data(pieLabelData2)
          .enter()
          .append("text")
          .text((d) => d)
          .attrs({
            y: (d, i) => 120 + i * 20,
            x: 80,
            "text-anchor": "end",
          })
          .styles({ "font-size": 15 });

        function redraw(type) {
          chart
            .selectAll(".bar,.dot")
            .transition()
            .ease(d3.easeQuadInOut)
            .duration(800)
            .attrs({
              transform: (d) =>
                type === 1
                  ? `translate(${x(jobData[d.i].translateX + 1)}, ${y(
                      jobData[d.i].translateY
                    )})`
                  : type === 2
                  ? `translate(${x(jobData[d.i].translateX + 1)}, ${y(
                      jobData[d.i].translateY2
                    )})`
                  : `translate(0,0)`,
            });
          chart
            .selectAll(".barGradients")
            .transition()
            .ease(d3.easeQuadInOut)
            .duration(800)
            .attrs({
              width: (d) => (type < 3 ? x(2) : x(20)),
              transform: (d) =>
                type === 1
                  ? `scale(1,1) translate(${x(
                      jobData[d.i].translateX + 1
                    )}, ${y(jobData[d.i].translateY)})`
                  : type === 2
                  ? `scale(1,1) translate(${x(
                      jobData[d.i].translateX + 1
                    )}, ${y(jobData[d.i].translateY2)})`
                  : `scale(1,1) translate(0,0)`,
            });
        }

        // redraw();
        document.getElementById("chrono").addEventListener("click", () => {
          redraw(3);
        });
        document.getElementById("length").addEventListener("click", () => {
          redraw(1);
        });
        document.getElementById("size").addEventListener("click", () => {
          redraw(2);
        });
      });
    </script>
    <style>
      .barGradients {
        transform-origin: left;
      }
    </style>
  </footer>
</html>
